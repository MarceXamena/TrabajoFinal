<!DOCTYPE html>
<html>
<head>
    <title>Chat</title>
</head>
<body>
    <h1>Chat</h1>
    <div id="chat-container">
        <div id="chat-messages"></div>
    </div>
    <form id="chat-form">
        <input type="text" id="message-input" placeholder="Type your message">
        <input type="submit" value="Send">
    </form>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            var chatMessages = document.getElementById('chat-messages');
            var chatForm = document.getElementById('chat-form');
            var messageInput = document.getElementById('message-input');

            function updateChatMessages() {
                fetch('/api/chat')
                    .then(function(response) {
                        return response.json();
                    })
                    .then(function(data) {
                        chatMessages.innerHTML = '';
                        data.forEach(function(message) {
                            var newMessageElement = document.createElement('p');
                            newMessageElement.textContent = message;
                            chatMessages.appendChild(newMessageElement);
                        });
                    });
            }

            chatForm.addEventListener('submit', function(event) {
                event.preventDefault();
                var message = messageInput.value;
                fetch('/api/chat', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({ 'message': message })
                })
                .then(function(response) {
                    console.log('Message sent');
                    messageInput.value = '';
                    updateChatMessages();
                });
            });

            updateChatMessages();
        });
    </script>
</body>
</html>